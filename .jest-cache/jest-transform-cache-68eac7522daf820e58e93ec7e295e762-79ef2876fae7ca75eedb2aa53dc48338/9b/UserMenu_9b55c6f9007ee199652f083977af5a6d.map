{"version":3,"sources":["/Users/joshszep/code/therobotoverlord-mono/therobotoverlord-web/src/components/navigation/UserMenu.tsx"],"sourcesContent":["/**\n * User menu dropdown component\n * Displays user profile and account actions\n */\n\n'use client';\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { CurrentUser } from '@/types/user';\nimport { Button } from '@/components/ui/Button';\n\ninterface UserMenuProps {\n  user: CurrentUser;\n}\n\nexport function UserMenu({ user }: UserMenuProps) {\n  const { logout } = useAuth();\n  const [isOpen, setIsOpen] = useState(false);\n  const menuRef = useRef<HTMLDivElement>(null);\n\n  // Close menu when clicking outside\n  useEffect(() => {\n    function handleClickOutside(event: MouseEvent) {\n      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\n        setIsOpen(false);\n      }\n    }\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  const handleLogout = async () => {\n    try {\n      await logout();\n      setIsOpen(false);\n    } catch (error) {\n      console.error('Logout failed:', error);\n    }\n  };\n\n  const menuItems = [\n    {\n      label: 'Dashboard',\n      href: '/dashboard',\n      icon: 'üìä'\n    },\n    {\n      label: 'Profile',\n      href: '/profile',\n      icon: 'üë§'\n    },\n    {\n      label: 'Settings',\n      href: '/settings',\n      icon: '‚öôÔ∏è'\n    },\n    {\n      label: 'Help',\n      href: '/help',\n      icon: '‚ùì'\n    }\n  ];\n\n  return (\n    <div className=\"relative\" ref={menuRef}>\n      {/* User Avatar/Button */}\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"flex items-center space-x-2 p-2 rounded-lg hover:bg-surface-dark transition-colors\"\n        aria-label=\"User menu\"\n      >\n        <div className=\"w-8 h-8 bg-overlord-red rounded-full flex items-center justify-center\">\n          <span className=\"text-light-text text-sm font-bold\">\n            {user.name.charAt(0).toUpperCase()}\n          </span>\n        </div>\n        <div className=\"hidden sm:block text-left\">\n          <div className=\"text-sm font-medium text-light-text truncate max-w-32\">\n            {user.name}\n          </div>\n          <div className=\"text-xs text-muted-light capitalize\">\n            {user.role}\n          </div>\n        </div>\n        <svg\n          className={`w-4 h-4 text-muted-light transition-transform ${\n            isOpen ? 'rotate-180' : ''\n          }`}\n          fill=\"none\"\n          stroke=\"currentColor\"\n          viewBox=\"0 0 24 24\"\n        >\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth={2}\n            d=\"M19 9l-7 7-7-7\"\n          />\n        </svg>\n      </button>\n\n      {/* Dropdown Menu */}\n      {isOpen && (\n        <div className=\"absolute right-0 mt-2 w-64 bg-surface-dark border border-muted-light rounded-lg shadow-lg z-50\">\n          {/* User Info Header */}\n          <div className=\"px-4 py-3 border-b border-muted-light\">\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"w-10 h-10 bg-overlord-red rounded-full flex items-center justify-center\">\n                <span className=\"text-light-text font-bold\">\n                  {user.name.charAt(0).toUpperCase()}\n                </span>\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <div className=\"text-sm font-medium text-light-text truncate\">\n                  {user.name}\n                </div>\n                <div className=\"text-xs text-muted-light truncate\">\n                  {user.email}\n                </div>\n                <div className=\"flex items-center space-x-4 mt-1\">\n                  <span className=\"text-xs text-overlord-red font-bold\">\n                    Loyalty: {user.loyalty_score || 0}\n                  </span>\n                  <span className=\"text-xs text-approved-green\">\n                    Rep: {user.reputation_score || 0}\n                  </span>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Menu Items */}\n          <div className=\"py-1\">\n            {menuItems.map((item) => (\n              <a\n                key={item.href}\n                href={item.href}\n                className=\"flex items-center px-4 py-2 text-sm text-muted-light hover:text-light-text hover:bg-surface-dark transition-colors\"\n                onClick={() => setIsOpen(false)}\n              >\n                <span className=\"mr-3\">{item.icon}</span>\n                {item.label}\n              </a>\n            ))}\n          </div>\n\n          {/* Status Indicator */}\n          <div className=\"px-4 py-2 border-t border-muted-light\">\n            <div className=\"flex items-center justify-between text-xs\">\n              <div className=\"flex items-center\">\n                <div className={`w-2 h-2 rounded-full mr-2 ${\n                  user.status === 'active' ? 'bg-approved-green' : 'bg-rejected-red'\n                }`}></div>\n                <span className=\"text-muted-light capitalize\">\n                  Status: {user.status}\n                </span>\n              </div>\n              {user.is_verified && (\n                <span className=\"text-approved-green\">‚úì Verified</span>\n              )}\n            </div>\n          </div>\n\n          {/* Logout Button */}\n          <div className=\"px-4 py-3 border-t border-muted-light\">\n            <Button\n              variant=\"danger\"\n              size=\"sm\"\n              onClick={handleLogout}\n              className=\"w-full\"\n            >\n              Logout\n            </Button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["UserMenu","user","logout","useAuth","isOpen","setIsOpen","useState","menuRef","useRef","useEffect","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","handleLogout","error","console","menuItems","label","href","icon","div","className","ref","button","onClick","aria-label","span","name","charAt","toUpperCase","role","svg","fill","stroke","viewBox","path","strokeLinecap","strokeLinejoin","strokeWidth","d","email","loyalty_score","reputation_score","map","item","a","status","is_verified","Button","variant","size"],"mappings":"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"}