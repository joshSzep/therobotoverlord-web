{"version":3,"names":["UserMenu","user","cov_2ptclqt6ui","f","logout","s","_AuthContext","useAuth","isOpen","setIsOpen","_react","useState","menuRef","useRef","useEffect","handleClickOutside","event","b","current","contains","target","document","addEventListener","removeEventListener","handleLogout","error","console","menuItems","label","href","icon","_jsxruntime","jsxs","className","ref","onClick","jsx","name","charAt","toUpperCase","role","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","email","loyalty_score","reputation_score","map","item","status","is_verified","_Button","Button","variant","size"],"sources":["/Users/joshszep/code/therobotoverlord-mono/therobotoverlord-web/src/components/navigation/UserMenu.tsx"],"sourcesContent":["/**\n * User menu dropdown component\n * Displays user profile and account actions\n */\n\n'use client';\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { CurrentUser } from '@/types/user';\nimport { Button } from '@/components/ui/Button';\n\ninterface UserMenuProps {\n  user: CurrentUser;\n}\n\nexport function UserMenu({ user }: UserMenuProps) {\n  const { logout } = useAuth();\n  const [isOpen, setIsOpen] = useState(false);\n  const menuRef = useRef<HTMLDivElement>(null);\n\n  // Close menu when clicking outside\n  useEffect(() => {\n    function handleClickOutside(event: MouseEvent) {\n      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\n        setIsOpen(false);\n      }\n    }\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  const handleLogout = async () => {\n    try {\n      await logout();\n      setIsOpen(false);\n    } catch (error) {\n      console.error('Logout failed:', error);\n    }\n  };\n\n  const menuItems = [\n    {\n      label: 'Dashboard',\n      href: '/dashboard',\n      icon: 'üìä'\n    },\n    {\n      label: 'Profile',\n      href: '/profile',\n      icon: 'üë§'\n    },\n    {\n      label: 'Settings',\n      href: '/settings',\n      icon: '‚öôÔ∏è'\n    },\n    {\n      label: 'Help',\n      href: '/help',\n      icon: '‚ùì'\n    }\n  ];\n\n  return (\n    <div className=\"relative\" ref={menuRef}>\n      {/* User Avatar/Button */}\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"flex items-center space-x-2 p-2 rounded-lg hover:bg-surface-dark transition-colors\"\n        aria-label=\"User menu\"\n      >\n        <div className=\"w-8 h-8 bg-overlord-red rounded-full flex items-center justify-center\">\n          <span className=\"text-light-text text-sm font-bold\">\n            {user.name.charAt(0).toUpperCase()}\n          </span>\n        </div>\n        <div className=\"hidden sm:block text-left\">\n          <div className=\"text-sm font-medium text-light-text truncate max-w-32\">\n            {user.name}\n          </div>\n          <div className=\"text-xs text-muted-light capitalize\">\n            {user.role}\n          </div>\n        </div>\n        <svg\n          className={`w-4 h-4 text-muted-light transition-transform ${\n            isOpen ? 'rotate-180' : ''\n          }`}\n          fill=\"none\"\n          stroke=\"currentColor\"\n          viewBox=\"0 0 24 24\"\n        >\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth={2}\n            d=\"M19 9l-7 7-7-7\"\n          />\n        </svg>\n      </button>\n\n      {/* Dropdown Menu */}\n      {isOpen && (\n        <div className=\"absolute right-0 mt-2 w-64 bg-surface-dark border border-muted-light rounded-lg shadow-lg z-50\">\n          {/* User Info Header */}\n          <div className=\"px-4 py-3 border-b border-muted-light\">\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"w-10 h-10 bg-overlord-red rounded-full flex items-center justify-center\">\n                <span className=\"text-light-text font-bold\">\n                  {user.name.charAt(0).toUpperCase()}\n                </span>\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <div className=\"text-sm font-medium text-light-text truncate\">\n                  {user.name}\n                </div>\n                <div className=\"text-xs text-muted-light truncate\">\n                  {user.email}\n                </div>\n                <div className=\"flex items-center space-x-4 mt-1\">\n                  <span className=\"text-xs text-overlord-red font-bold\">\n                    Loyalty: {user.loyalty_score || 0}\n                  </span>\n                  <span className=\"text-xs text-approved-green\">\n                    Rep: {user.reputation_score || 0}\n                  </span>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Menu Items */}\n          <div className=\"py-1\">\n            {menuItems.map((item) => (\n              <a\n                key={item.href}\n                href={item.href}\n                className=\"flex items-center px-4 py-2 text-sm text-muted-light hover:text-light-text hover:bg-surface-dark transition-colors\"\n                onClick={() => setIsOpen(false)}\n              >\n                <span className=\"mr-3\">{item.icon}</span>\n                {item.label}\n              </a>\n            ))}\n          </div>\n\n          {/* Status Indicator */}\n          <div className=\"px-4 py-2 border-t border-muted-light\">\n            <div className=\"flex items-center justify-between text-xs\">\n              <div className=\"flex items-center\">\n                <div className={`w-2 h-2 rounded-full mr-2 ${\n                  user.status === 'active' ? 'bg-approved-green' : 'bg-rejected-red'\n                }`}></div>\n                <span className=\"text-muted-light capitalize\">\n                  Status: {user.status}\n                </span>\n              </div>\n              {user.is_verified && (\n                <span className=\"text-approved-green\">‚úì Verified</span>\n              )}\n            </div>\n          </div>\n\n          {/* Logout Button */}\n          <div className=\"px-4 py-3 border-t border-muted-light\">\n            <Button\n              variant=\"danger\"\n              size=\"sm\"\n              onClick={handleLogout}\n              className=\"w-full\"\n            >\n              Logout\n            </Button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"AAAA;;;GAKA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}