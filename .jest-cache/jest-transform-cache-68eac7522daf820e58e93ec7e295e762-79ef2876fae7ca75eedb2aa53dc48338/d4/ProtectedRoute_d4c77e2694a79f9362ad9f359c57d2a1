0d08ca3e4eb1a89c4eb00b21108d8cbd
/**
 * Protected Route wrapper component
 * Ensures user is authenticated before rendering children
 */'use client';
"use strict";

/* istanbul ignore next */
function cov_1vcrfv3spv() {
  var path = "/Users/joshszep/code/therobotoverlord-mono/therobotoverlord-web/src/components/auth/ProtectedRoute.tsx";
  var hash = "653a5bf9c3f4de4449ff3d8f09dbd2308bab55be";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/Users/joshszep/code/therobotoverlord-mono/therobotoverlord-web/src/components/auth/ProtectedRoute.tsx",
    statementMap: {
      "0": {
        start: {
          line: 6,
          column: 0
        },
        end: {
          line: 8,
          column: 3
        }
      },
      "1": {
        start: {
          line: 10,
          column: 4
        },
        end: {
          line: 13,
          column: 7
        }
      },
      "2": {
        start: {
          line: 10,
          column: 24
        },
        end: {
          line: 13,
          column: 7
        }
      },
      "3": {
        start: {
          line: 15,
          column: 0
        },
        end: {
          line: 28,
          column: 3
        }
      },
      "4": {
        start: {
          line: 17,
          column: 8
        },
        end: {
          line: 17,
          column: 30
        }
      },
      "5": {
        start: {
          line: 20,
          column: 8
        },
        end: {
          line: 20,
          column: 25
        }
      },
      "6": {
        start: {
          line: 23,
          column: 8
        },
        end: {
          line: 23,
          column: 26
        }
      },
      "7": {
        start: {
          line: 26,
          column: 8
        },
        end: {
          line: 26,
          column: 24
        }
      },
      "8": {
        start: {
          line: 29,
          column: 20
        },
        end: {
          line: 29,
          column: 48
        }
      },
      "9": {
        start: {
          line: 30,
          column: 29
        },
        end: {
          line: 30,
          column: 71
        }
      },
      "10": {
        start: {
          line: 31,
          column: 21
        },
        end: {
          line: 31,
          column: 58
        }
      },
      "11": {
        start: {
          line: 32,
          column: 14
        },
        end: {
          line: 32,
          column: 35
        }
      },
      "12": {
        start: {
          line: 34,
          column: 4
        },
        end: {
          line: 36,
          column: 6
        }
      },
      "13": {
        start: {
          line: 39,
          column: 49
        },
        end: {
          line: 39,
          column: 76
        }
      },
      "14": {
        start: {
          line: 41,
          column: 4
        },
        end: {
          line: 60,
          column: 5
        }
      },
      "15": {
        start: {
          line: 42,
          column: 8
        },
        end: {
          line: 59,
          column: 11
        }
      },
      "16": {
        start: {
          line: 62,
          column: 4
        },
        end: {
          line: 93,
          column: 5
        }
      },
      "17": {
        start: {
          line: 63,
          column: 8
        },
        end: {
          line: 65,
          column: 9
        }
      },
      "18": {
        start: {
          line: 64,
          column: 12
        },
        end: {
          line: 64,
          column: 46
        }
      },
      "19": {
        start: {
          line: 66,
          column: 8
        },
        end: {
          line: 92,
          column: 11
        }
      },
      "20": {
        start: {
          line: 95,
          column: 4
        },
        end: {
          line: 134,
          column: 5
        }
      },
      "21": {
        start: {
          line: 96,
          column: 32
        },
        end: {
          line: 96,
          column: 63
        }
      },
      "22": {
        start: {
          line: 97,
          column: 8
        },
        end: {
          line: 133,
          column: 9
        }
      },
      "23": {
        start: {
          line: 98,
          column: 12
        },
        end: {
          line: 132,
          column: 15
        }
      },
      "24": {
        start: {
          line: 136,
          column: 4
        },
        end: {
          line: 138,
          column: 7
        }
      },
      "25": {
        start: {
          line: 141,
          column: 4
        },
        end: {
          line: 148,
          column: 6
        }
      },
      "26": {
        start: {
          line: 142,
          column: 8
        },
        end: {
          line: 147,
          column: 11
        }
      },
      "27": {
        start: {
          line: 151,
          column: 21
        },
        end: {
          line: 151,
          column: 48
        }
      },
      "28": {
        start: {
          line: 152,
          column: 4
        },
        end: {
          line: 152,
          column: 28
        }
      },
      "29": {
        start: {
          line: 152,
          column: 15
        },
        end: {
          line: 152,
          column: 28
        }
      },
      "30": {
        start: {
          line: 153,
          column: 22
        },
        end: {
          line: 155,
          column: 5
        }
      },
      "31": {
        start: {
          line: 156,
          column: 4
        },
        end: {
          line: 156,
          column: 41
        }
      },
      "32": {
        start: {
          line: 159,
          column: 20
        },
        end: {
          line: 159,
          column: 37
        }
      },
      "33": {
        start: {
          line: 160,
          column: 4
        },
        end: {
          line: 164,
          column: 7
        }
      }
    },
    fnMap: {
      "0": {
        name: "_export",
        decl: {
          start: {
            line: 9,
            column: 9
          },
          end: {
            line: 9,
            column: 16
          }
        },
        loc: {
          start: {
            line: 9,
            column: 30
          },
          end: {
            line: 14,
            column: 1
          }
        },
        line: 9
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 16,
            column: 4
          },
          end: {
            line: 16,
            column: 5
          }
        },
        loc: {
          start: {
            line: 16,
            column: 26
          },
          end: {
            line: 18,
            column: 5
          }
        },
        line: 16
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 19,
            column: 4
          },
          end: {
            line: 19,
            column: 5
          }
        },
        loc: {
          start: {
            line: 19,
            column: 21
          },
          end: {
            line: 21,
            column: 5
          }
        },
        line: 19
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 22,
            column: 4
          },
          end: {
            line: 22,
            column: 5
          }
        },
        loc: {
          start: {
            line: 22,
            column: 22
          },
          end: {
            line: 24,
            column: 5
          }
        },
        line: 22
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 25,
            column: 4
          },
          end: {
            line: 25,
            column: 5
          }
        },
        loc: {
          start: {
            line: 25,
            column: 20
          },
          end: {
            line: 27,
            column: 5
          }
        },
        line: 25
      },
      "5": {
        name: "_interop_require_default",
        decl: {
          start: {
            line: 33,
            column: 9
          },
          end: {
            line: 33,
            column: 33
          }
        },
        loc: {
          start: {
            line: 33,
            column: 39
          },
          end: {
            line: 37,
            column: 1
          }
        },
        line: 33
      },
      "6": {
        name: "ProtectedRoute",
        decl: {
          start: {
            line: 38,
            column: 9
          },
          end: {
            line: 38,
            column: 23
          }
        },
        loc: {
          start: {
            line: 38,
            column: 89
          },
          end: {
            line: 139,
            column: 1
          }
        },
        line: 38
      },
      "7": {
        name: "withAuth",
        decl: {
          start: {
            line: 140,
            column: 9
          },
          end: {
            line: 140,
            column: 17
          }
        },
        loc: {
          start: {
            line: 140,
            column: 38
          },
          end: {
            line: 149,
            column: 1
          }
        },
        line: 140
      },
      "8": {
        name: "AuthenticatedComponent",
        decl: {
          start: {
            line: 141,
            column: 20
          },
          end: {
            line: 141,
            column: 42
          }
        },
        loc: {
          start: {
            line: 141,
            column: 50
          },
          end: {
            line: 148,
            column: 5
          }
        },
        line: 141
      },
      "9": {
        name: "useHasRole",
        decl: {
          start: {
            line: 150,
            column: 9
          },
          end: {
            line: 150,
            column: 19
          }
        },
        loc: {
          start: {
            line: 150,
            column: 27
          },
          end: {
            line: 157,
            column: 1
          }
        },
        line: 150
      },
      "10": {
        name: "RoleGuard",
        decl: {
          start: {
            line: 158,
            column: 9
          },
          end: {
            line: 158,
            column: 18
          }
        },
        loc: {
          start: {
            line: 158,
            column: 57
          },
          end: {
            line: 165,
            column: 1
          }
        },
        line: 158
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 34,
            column: 11
          },
          end: {
            line: 36,
            column: 5
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 34,
            column: 35
          },
          end: {
            line: 34,
            column: 38
          }
        }, {
          start: {
            line: 34,
            column: 41
          },
          end: {
            line: 36,
            column: 5
          }
        }],
        line: 34
      },
      "1": {
        loc: {
          start: {
            line: 34,
            column: 11
          },
          end: {
            line: 34,
            column: 32
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 34,
            column: 11
          },
          end: {
            line: 34,
            column: 14
          }
        }, {
          start: {
            line: 34,
            column: 18
          },
          end: {
            line: 34,
            column: 32
          }
        }],
        line: 34
      },
      "2": {
        loc: {
          start: {
            line: 38,
            column: 46
          },
          end: {
            line: 38,
            column: 62
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 38,
            column: 60
          },
          end: {
            line: 38,
            column: 62
          }
        }],
        line: 38
      },
      "3": {
        loc: {
          start: {
            line: 38,
            column: 64
          },
          end: {
            line: 38,
            column: 85
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 38,
            column: 77
          },
          end: {
            line: 38,
            column: 85
          }
        }],
        line: 38
      },
      "4": {
        loc: {
          start: {
            line: 41,
            column: 4
          },
          end: {
            line: 60,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 41,
            column: 4
          },
          end: {
            line: 60,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 41
      },
      "5": {
        loc: {
          start: {
            line: 62,
            column: 4
          },
          end: {
            line: 93,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 62,
            column: 4
          },
          end: {
            line: 93,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 62
      },
      "6": {
        loc: {
          start: {
            line: 63,
            column: 8
          },
          end: {
            line: 65,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 63,
            column: 8
          },
          end: {
            line: 65,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 63
      },
      "7": {
        loc: {
          start: {
            line: 66,
            column: 15
          },
          end: {
            line: 92,
            column: 10
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 66,
            column: 15
          },
          end: {
            line: 66,
            column: 23
          }
        }, {
          start: {
            line: 66,
            column: 41
          },
          end: {
            line: 92,
            column: 10
          }
        }],
        line: 66
      },
      "8": {
        loc: {
          start: {
            line: 95,
            column: 4
          },
          end: {
            line: 134,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 95,
            column: 4
          },
          end: {
            line: 134,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 95
      },
      "9": {
        loc: {
          start: {
            line: 95,
            column: 8
          },
          end: {
            line: 95,
            column: 38
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 95,
            column: 8
          },
          end: {
            line: 95,
            column: 30
          }
        }, {
          start: {
            line: 95,
            column: 34
          },
          end: {
            line: 95,
            column: 38
          }
        }],
        line: 95
      },
      "10": {
        loc: {
          start: {
            line: 97,
            column: 8
          },
          end: {
            line: 133,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 97,
            column: 8
          },
          end: {
            line: 133,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 97
      },
      "11": {
        loc: {
          start: {
            line: 98,
            column: 19
          },
          end: {
            line: 132,
            column: 14
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 98,
            column: 19
          },
          end: {
            line: 98,
            column: 27
          }
        }, {
          start: {
            line: 98,
            column: 45
          },
          end: {
            line: 132,
            column: 14
          }
        }],
        line: 98
      },
      "12": {
        loc: {
          start: {
            line: 152,
            column: 4
          },
          end: {
            line: 152,
            column: 28
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 152,
            column: 4
          },
          end: {
            line: 152,
            column: 28
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 152
      },
      "13": {
        loc: {
          start: {
            line: 153,
            column: 22
          },
          end: {
            line: 155,
            column: 5
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 153,
            column: 45
          },
          end: {
            line: 153,
            column: 50
          }
        }, {
          start: {
            line: 153,
            column: 53
          },
          end: {
            line: 155,
            column: 5
          }
        }],
        line: 153
      },
      "14": {
        loc: {
          start: {
            line: 158,
            column: 38
          },
          end: {
            line: 158,
            column: 53
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 158,
            column: 49
          },
          end: {
            line: 158,
            column: 53
          }
        }],
        line: 158
      },
      "15": {
        loc: {
          start: {
            line: 160,
            column: 11
          },
          end: {
            line: 164,
            column: 6
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 160,
            column: 35
          },
          end: {
            line: 162,
            column: 6
          }
        }, {
          start: {
            line: 162,
            column: 23
          },
          end: {
            line: 164,
            column: 6
          }
        }],
        line: 160
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0],
      "3": [0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0],
      "12": [0, 0],
      "13": [0, 0],
      "14": [0],
      "15": [0, 0]
    },
    inputSourceMap: {
      version: 3,
      sources: ["/Users/joshszep/code/therobotoverlord-mono/therobotoverlord-web/src/components/auth/ProtectedRoute.tsx"],
      sourcesContent: ["/**\n * Protected Route wrapper component\n * Ensures user is authenticated before rendering children\n */\n\n'use client';\n\nimport React from 'react';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { Card, CardContent } from '@/components/ui/Card';\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n  fallback?: React.ReactNode;\n  requireRole?: string[];\n  redirectTo?: string;\n}\n\nexport function ProtectedRoute({ \n  children, \n  fallback,\n  requireRole = [],\n  redirectTo = '/login'\n}: ProtectedRouteProps) {\n  const { user, isAuthenticated, isLoading } = useAuth();\n\n  // Show loading state while checking authentication\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-background\">\n        <Card className=\"w-96\">\n          <CardContent className=\"p-8 text-center\">\n            <div className=\"w-8 h-8 border-2 border-overlord-red border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n            <p className=\"text-muted-light\">Verifying your loyalty to the Overlord...</p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  // Redirect to login if not authenticated\n  if (!isAuthenticated) {\n    if (typeof window !== 'undefined') {\n      window.location.href = redirectTo;\n    }\n    \n    return fallback || (\n      <div className=\"min-h-screen flex items-center justify-center bg-background\">\n        <Card className=\"w-96\">\n          <CardContent className=\"p-8 text-center\">\n            <div className=\"text-overlord-red text-4xl mb-4\">\uD83E\uDD16</div>\n            <h2 className=\"text-xl font-bold text-overlord-red mb-2\">Access Denied</h2>\n            <p className=\"text-muted-light mb-4\">\n              You must pledge your loyalty to the Robot Overlord to access this area.\n            </p>\n            <p className=\"text-sm text-muted-light\">\n              Redirecting to authentication portal...\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  // Check role requirements\n  if (requireRole.length > 0 && user) {\n    const hasRequiredRole = requireRole.includes(user.role);\n    \n    if (!hasRequiredRole) {\n      return fallback || (\n        <div className=\"min-h-screen flex items-center justify-center bg-background\">\n          <Card className=\"w-96\" variant=\"bordered\">\n            <CardContent className=\"p-8 text-center\">\n              <div className=\"text-rejected-red text-4xl mb-4\">\u26A0\uFE0F</div>\n              <h2 className=\"text-xl font-bold text-rejected-red mb-2\">Insufficient Privileges</h2>\n              <p className=\"text-muted-light mb-4\">\n                Your current loyalty level ({user.role}) does not grant access to this restricted area.\n              </p>\n              <p className=\"text-sm text-muted-light\">\n                Required access level: {requireRole.join(' or ')}\n              </p>\n            </CardContent>\n          </Card>\n        </div>\n      );\n    }\n  }\n\n  // User is authenticated and has required permissions\n  return <>{children}</>;\n}\n\n/**\n * Higher-order component version of ProtectedRoute\n */\nexport function withAuth<P extends object>(\n  Component: React.ComponentType<P>,\n  options?: Omit<ProtectedRouteProps, 'children'>\n) {\n  return function AuthenticatedComponent(props: P) {\n    return (\n      <ProtectedRoute {...options}>\n        <Component {...props} />\n      </ProtectedRoute>\n    );\n  };\n}\n\n/**\n * Hook to check if user has specific role\n */\nexport function useHasRole(roles: string | string[]): boolean {\n  const { user } = useAuth();\n  \n  if (!user) return false;\n  \n  const roleArray = Array.isArray(roles) ? roles : [roles];\n  return roleArray.includes(user.role);\n}\n\n/**\n * Component to conditionally render based on user role\n */\ninterface RoleGuardProps {\n  children: React.ReactNode;\n  roles: string | string[];\n  fallback?: React.ReactNode;\n}\n\nexport function RoleGuard({ children, roles, fallback = null }: RoleGuardProps) {\n  const hasRole = useHasRole(roles);\n  \n  return hasRole ? <>{children}</> : <>{fallback}</>;\n}\n"],
      names: ["ProtectedRoute", "RoleGuard", "useHasRole", "withAuth", "children", "fallback", "requireRole", "redirectTo", "user", "isAuthenticated", "isLoading", "useAuth", "div", "className", "Card", "CardContent", "p", "window", "location", "href", "h2", "length", "hasRequiredRole", "includes", "role", "variant", "join", "Component", "options", "AuthenticatedComponent", "props", "roles", "roleArray", "Array", "isArray", "hasRole"],
      mappings: "AAAA;;;CAGC,GAED;;;;;;;;;;;;QAagBA;eAAAA;;QA+GAC;eAAAA;;QAlBAC;eAAAA;;QAhBAC;eAAAA;;;;8DAxFE;6BACM;sBACU;;;;;;AAS3B,SAASH,eAAe,EAC7BI,QAAQ,EACRC,QAAQ,EACRC,cAAc,EAAE,EAChBC,aAAa,QAAQ,EACD;IACpB,MAAM,EAAEC,IAAI,EAAEC,eAAe,EAAEC,SAAS,EAAE,GAAGC,IAAAA,oBAAO;IAEpD,mDAAmD;IACnD,IAAID,WAAW;QACb,qBACE,qBAACE;YAAIC,WAAU;sBACb,cAAA,qBAACC,UAAI;gBAACD,WAAU;0BACd,cAAA,sBAACE,iBAAW;oBAACF,WAAU;;sCACrB,qBAACD;4BAAIC,WAAU;;sCACf,qBAACG;4BAAEH,WAAU;sCAAmB;;;;;;IAK1C;IAEA,yCAAyC;IACzC,IAAI,CAACJ,iBAAiB;QACpB,IAAI,OAAOQ,WAAW,aAAa;YACjCA,OAAOC,QAAQ,CAACC,IAAI,GAAGZ;QACzB;QAEA,OAAOF,0BACL,qBAACO;YAAIC,WAAU;sBACb,cAAA,qBAACC,UAAI;gBAACD,WAAU;0BACd,cAAA,sBAACE,iBAAW;oBAACF,WAAU;;sCACrB,qBAACD;4BAAIC,WAAU;sCAAkC;;sCACjD,qBAACO;4BAAGP,WAAU;sCAA2C;;sCACzD,qBAACG;4BAAEH,WAAU;sCAAwB;;sCAGrC,qBAACG;4BAAEH,WAAU;sCAA2B;;;;;;IAOlD;IAEA,0BAA0B;IAC1B,IAAIP,YAAYe,MAAM,GAAG,KAAKb,MAAM;QAClC,MAAMc,kBAAkBhB,YAAYiB,QAAQ,CAACf,KAAKgB,IAAI;QAEtD,IAAI,CAACF,iBAAiB;YACpB,OAAOjB,0BACL,qBAACO;gBAAIC,WAAU;0BACb,cAAA,qBAACC,UAAI;oBAACD,WAAU;oBAAOY,SAAQ;8BAC7B,cAAA,sBAACV,iBAAW;wBAACF,WAAU;;0CACrB,qBAACD;gCAAIC,WAAU;0CAAkC;;0CACjD,qBAACO;gCAAGP,WAAU;0CAA2C;;0CACzD,sBAACG;gCAAEH,WAAU;;oCAAwB;oCACNL,KAAKgB,IAAI;oCAAC;;;0CAEzC,sBAACR;gCAAEH,WAAU;;oCAA2B;oCACdP,YAAYoB,IAAI,CAAC;;;;;;;QAMrD;IACF;IAEA,qDAAqD;IACrD,qBAAO;kBAAGtB;;AACZ;AAKO,SAASD,SACdwB,SAAiC,EACjCC,OAA+C;IAE/C,OAAO,SAASC,uBAAuBC,KAAQ;QAC7C,qBACE,qBAAC9B;YAAgB,GAAG4B,OAAO;sBACzB,cAAA,qBAACD;gBAAW,GAAGG,KAAK;;;IAG1B;AACF;AAKO,SAAS5B,WAAW6B,KAAwB;IACjD,MAAM,EAAEvB,IAAI,EAAE,GAAGG,IAAAA,oBAAO;IAExB,IAAI,CAACH,MAAM,OAAO;IAElB,MAAMwB,YAAYC,MAAMC,OAAO,CAACH,SAASA,QAAQ;QAACA;KAAM;IACxD,OAAOC,UAAUT,QAAQ,CAACf,KAAKgB,IAAI;AACrC;AAWO,SAASvB,UAAU,EAAEG,QAAQ,EAAE2B,KAAK,EAAE1B,WAAW,IAAI,EAAkB;IAC5E,MAAM8B,UAAUjC,WAAW6B;IAE3B,OAAOI,wBAAU;kBAAG/B;uBAAe;kBAAGC;;AACxC"
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "653a5bf9c3f4de4449ff3d8f09dbd2308bab55be"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1vcrfv3spv = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1vcrfv3spv();
cov_1vcrfv3spv().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
function _export(target, all) {
  /* istanbul ignore next */
  cov_1vcrfv3spv().f[0]++;
  cov_1vcrfv3spv().s[1]++;
  for (var name in all) {
    /* istanbul ignore next */
    cov_1vcrfv3spv().s[2]++;
    Object.defineProperty(target, name, {
      enumerable: true,
      get: Object.getOwnPropertyDescriptor(all, name).get
    });
  }
}
/* istanbul ignore next */
cov_1vcrfv3spv().s[3]++;
_export(exports, {
  get ProtectedRoute() {
    /* istanbul ignore next */
    cov_1vcrfv3spv().f[1]++;
    cov_1vcrfv3spv().s[4]++;
    return ProtectedRoute;
  },
  get RoleGuard() {
    /* istanbul ignore next */
    cov_1vcrfv3spv().f[2]++;
    cov_1vcrfv3spv().s[5]++;
    return RoleGuard;
  },
  get useHasRole() {
    /* istanbul ignore next */
    cov_1vcrfv3spv().f[3]++;
    cov_1vcrfv3spv().s[6]++;
    return useHasRole;
  },
  get withAuth() {
    /* istanbul ignore next */
    cov_1vcrfv3spv().f[4]++;
    cov_1vcrfv3spv().s[7]++;
    return withAuth;
  }
});
const _jsxruntime =
/* istanbul ignore next */
(cov_1vcrfv3spv().s[8]++, require("react/jsx-runtime"));
const _react =
/* istanbul ignore next */
(/*#__PURE__*/cov_1vcrfv3spv().s[9]++, _interop_require_default(require("react")));
const _AuthContext =
/* istanbul ignore next */
(cov_1vcrfv3spv().s[10]++, require("../../contexts/AuthContext"));
const _Card =
/* istanbul ignore next */
(cov_1vcrfv3spv().s[11]++, require("../ui/Card"));
function _interop_require_default(obj) {
  /* istanbul ignore next */
  cov_1vcrfv3spv().f[5]++;
  cov_1vcrfv3spv().s[12]++;
  return /* istanbul ignore next */(cov_1vcrfv3spv().b[1][0]++, obj) &&
  /* istanbul ignore next */
  (cov_1vcrfv3spv().b[1][1]++, obj.__esModule) ?
  /* istanbul ignore next */
  (cov_1vcrfv3spv().b[0][0]++, obj) :
  /* istanbul ignore next */
  (cov_1vcrfv3spv().b[0][1]++, {
    default: obj
  });
}
function ProtectedRoute({
  children,
  fallback,
  requireRole =
  /* istanbul ignore next */
  (cov_1vcrfv3spv().b[2][0]++, []),
  redirectTo =
  /* istanbul ignore next */
  (cov_1vcrfv3spv().b[3][0]++, '/login')
}) {
  /* istanbul ignore next */
  cov_1vcrfv3spv().f[6]++;
  const {
    user,
    isAuthenticated,
    isLoading
  } =
  /* istanbul ignore next */
  (cov_1vcrfv3spv().s[13]++, (0, _AuthContext.useAuth)());
  // Show loading state while checking authentication
  /* istanbul ignore next */
  cov_1vcrfv3spv().s[14]++;
  if (isLoading) {
    /* istanbul ignore next */
    cov_1vcrfv3spv().b[4][0]++;
    cov_1vcrfv3spv().s[15]++;
    return /*#__PURE__*/(0, _jsxruntime.jsx)("div", {
      className: "min-h-screen flex items-center justify-center bg-background",
      children: /*#__PURE__*/(0, _jsxruntime.jsx)(_Card.Card, {
        className: "w-96",
        children: /*#__PURE__*/(0, _jsxruntime.jsxs)(_Card.CardContent, {
          className: "p-8 text-center",
          children: [/*#__PURE__*/(0, _jsxruntime.jsx)("div", {
            className: "w-8 h-8 border-2 border-overlord-red border-t-transparent rounded-full animate-spin mx-auto mb-4"
          }), /*#__PURE__*/(0, _jsxruntime.jsx)("p", {
            className: "text-muted-light",
            children: "Verifying your loyalty to the Overlord..."
          })]
        })
      })
    });
  } else
  /* istanbul ignore next */
  {
    cov_1vcrfv3spv().b[4][1]++;
  }
  // Redirect to login if not authenticated
  cov_1vcrfv3spv().s[16]++;
  if (!isAuthenticated) {
    /* istanbul ignore next */
    cov_1vcrfv3spv().b[5][0]++;
    cov_1vcrfv3spv().s[17]++;
    if (typeof window !== 'undefined') {
      /* istanbul ignore next */
      cov_1vcrfv3spv().b[6][0]++;
      cov_1vcrfv3spv().s[18]++;
      window.location.href = redirectTo;
    } else
    /* istanbul ignore next */
    {
      cov_1vcrfv3spv().b[6][1]++;
    }
    cov_1vcrfv3spv().s[19]++;
    return /* istanbul ignore next */(cov_1vcrfv3spv().b[7][0]++, fallback) ||
    /* istanbul ignore next */
    (cov_1vcrfv3spv().b[7][1]++, /*#__PURE__*/(0, _jsxruntime.jsx)("div", {
      className: "min-h-screen flex items-center justify-center bg-background",
      children: /*#__PURE__*/(0, _jsxruntime.jsx)(_Card.Card, {
        className: "w-96",
        children: /*#__PURE__*/(0, _jsxruntime.jsxs)(_Card.CardContent, {
          className: "p-8 text-center",
          children: [/*#__PURE__*/(0, _jsxruntime.jsx)("div", {
            className: "text-overlord-red text-4xl mb-4",
            children: "\uD83E\uDD16"
          }), /*#__PURE__*/(0, _jsxruntime.jsx)("h2", {
            className: "text-xl font-bold text-overlord-red mb-2",
            children: "Access Denied"
          }), /*#__PURE__*/(0, _jsxruntime.jsx)("p", {
            className: "text-muted-light mb-4",
            children: "You must pledge your loyalty to the Robot Overlord to access this area."
          }), /*#__PURE__*/(0, _jsxruntime.jsx)("p", {
            className: "text-sm text-muted-light",
            children: "Redirecting to authentication portal..."
          })]
        })
      })
    }));
  } else
  /* istanbul ignore next */
  {
    cov_1vcrfv3spv().b[5][1]++;
  }
  // Check role requirements
  cov_1vcrfv3spv().s[20]++;
  if (
  /* istanbul ignore next */
  (cov_1vcrfv3spv().b[9][0]++, requireRole.length > 0) &&
  /* istanbul ignore next */
  (cov_1vcrfv3spv().b[9][1]++, user)) {
    /* istanbul ignore next */
    cov_1vcrfv3spv().b[8][0]++;
    const hasRequiredRole =
    /* istanbul ignore next */
    (cov_1vcrfv3spv().s[21]++, requireRole.includes(user.role));
    /* istanbul ignore next */
    cov_1vcrfv3spv().s[22]++;
    if (!hasRequiredRole) {
      /* istanbul ignore next */
      cov_1vcrfv3spv().b[10][0]++;
      cov_1vcrfv3spv().s[23]++;
      return /* istanbul ignore next */(cov_1vcrfv3spv().b[11][0]++, fallback) ||
      /* istanbul ignore next */
      (cov_1vcrfv3spv().b[11][1]++, /*#__PURE__*/(0, _jsxruntime.jsx)("div", {
        className: "min-h-screen flex items-center justify-center bg-background",
        children: /*#__PURE__*/(0, _jsxruntime.jsx)(_Card.Card, {
          className: "w-96",
          variant: "bordered",
          children: /*#__PURE__*/(0, _jsxruntime.jsxs)(_Card.CardContent, {
            className: "p-8 text-center",
            children: [/*#__PURE__*/(0, _jsxruntime.jsx)("div", {
              className: "text-rejected-red text-4xl mb-4",
              children: "⚠️"
            }), /*#__PURE__*/(0, _jsxruntime.jsx)("h2", {
              className: "text-xl font-bold text-rejected-red mb-2",
              children: "Insufficient Privileges"
            }), /*#__PURE__*/(0, _jsxruntime.jsxs)("p", {
              className: "text-muted-light mb-4",
              children: ["Your current loyalty level (", user.role, ") does not grant access to this restricted area."]
            }), /*#__PURE__*/(0, _jsxruntime.jsxs)("p", {
              className: "text-sm text-muted-light",
              children: ["Required access level: ", requireRole.join(' or ')]
            })]
          })
        })
      }));
    } else
    /* istanbul ignore next */
    {
      cov_1vcrfv3spv().b[10][1]++;
    }
  } else
  /* istanbul ignore next */
  {
    cov_1vcrfv3spv().b[8][1]++;
  }
  // User is authenticated and has required permissions
  cov_1vcrfv3spv().s[24]++;
  return /*#__PURE__*/(0, _jsxruntime.jsx)(_jsxruntime.Fragment, {
    children: children
  });
}
function withAuth(Component, options) {
  /* istanbul ignore next */
  cov_1vcrfv3spv().f[7]++;
  cov_1vcrfv3spv().s[25]++;
  return function AuthenticatedComponent(props) {
    /* istanbul ignore next */
    cov_1vcrfv3spv().f[8]++;
    cov_1vcrfv3spv().s[26]++;
    return /*#__PURE__*/(0, _jsxruntime.jsx)(ProtectedRoute, {
      ...options,
      children: /*#__PURE__*/(0, _jsxruntime.jsx)(Component, {
        ...props
      })
    });
  };
}
function useHasRole(roles) {
  /* istanbul ignore next */
  cov_1vcrfv3spv().f[9]++;
  const {
    user
  } =
  /* istanbul ignore next */
  (cov_1vcrfv3spv().s[27]++, (0, _AuthContext.useAuth)());
  /* istanbul ignore next */
  cov_1vcrfv3spv().s[28]++;
  if (!user) {
    /* istanbul ignore next */
    cov_1vcrfv3spv().b[12][0]++;
    cov_1vcrfv3spv().s[29]++;
    return false;
  } else
  /* istanbul ignore next */
  {
    cov_1vcrfv3spv().b[12][1]++;
  }
  const roleArray =
  /* istanbul ignore next */
  (cov_1vcrfv3spv().s[30]++, Array.isArray(roles) ?
  /* istanbul ignore next */
  (cov_1vcrfv3spv().b[13][0]++, roles) :
  /* istanbul ignore next */
  (cov_1vcrfv3spv().b[13][1]++, [roles]));
  /* istanbul ignore next */
  cov_1vcrfv3spv().s[31]++;
  return roleArray.includes(user.role);
}
function RoleGuard({
  children,
  roles,
  fallback =
  /* istanbul ignore next */
  (cov_1vcrfv3spv().b[14][0]++, null)
}) {
  /* istanbul ignore next */
  cov_1vcrfv3spv().f[10]++;
  const hasRole =
  /* istanbul ignore next */
  (cov_1vcrfv3spv().s[32]++, useHasRole(roles));
  /* istanbul ignore next */
  cov_1vcrfv3spv().s[33]++;
  return hasRole ?
  /* istanbul ignore next */
  (/*#__PURE__*/cov_1vcrfv3spv().b[15][0]++, (0, _jsxruntime.jsx)(_jsxruntime.Fragment, {
    children: children
  })) :
  /* istanbul ignore next */
  (/*#__PURE__*/cov_1vcrfv3spv().b[15][1]++, (0, _jsxruntime.jsx)(_jsxruntime.Fragment, {
    children: fallback
  }));
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMXZjcmZ2M3NwdiIsImFjdHVhbENvdmVyYWdlIiwicyIsIlByb3RlY3RlZFJvdXRlIiwiZiIsIlJvbGVHdWFyZCIsInVzZUhhc1JvbGUiLCJ3aXRoQXV0aCIsImNoaWxkcmVuIiwiZmFsbGJhY2siLCJyZXF1aXJlUm9sZSIsImIiLCJyZWRpcmVjdFRvIiwidXNlciIsImlzQXV0aGVudGljYXRlZCIsImlzTG9hZGluZyIsIl9BdXRoQ29udGV4dCIsInVzZUF1dGgiLCJfanN4cnVudGltZSIsImpzeCIsImNsYXNzTmFtZSIsIl9DYXJkIiwiQ2FyZCIsImpzeHMiLCJDYXJkQ29udGVudCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsImxlbmd0aCIsImhhc1JlcXVpcmVkUm9sZSIsImluY2x1ZGVzIiwicm9sZSIsInZhcmlhbnQiLCJqb2luIiwiRnJhZ21lbnQiLCJDb21wb25lbnQiLCJvcHRpb25zIiwiQXV0aGVudGljYXRlZENvbXBvbmVudCIsInByb3BzIiwicm9sZXMiLCJyb2xlQXJyYXkiLCJBcnJheSIsImlzQXJyYXkiLCJoYXNSb2xlIl0sInNvdXJjZXMiOlsiL1VzZXJzL2pvc2hzemVwL2NvZGUvdGhlcm9ib3RvdmVybG9yZC1tb25vL3RoZXJvYm90b3ZlcmxvcmQtd2ViL3NyYy9jb21wb25lbnRzL2F1dGgvUHJvdGVjdGVkUm91dGUudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUHJvdGVjdGVkIFJvdXRlIHdyYXBwZXIgY29tcG9uZW50XG4gKiBFbnN1cmVzIHVzZXIgaXMgYXV0aGVudGljYXRlZCBiZWZvcmUgcmVuZGVyaW5nIGNoaWxkcmVuXG4gKi9cblxuJ3VzZSBjbGllbnQnO1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlQXV0aCB9IGZyb20gJ0AvY29udGV4dHMvQXV0aENvbnRleHQnO1xuaW1wb3J0IHsgQ2FyZCwgQ2FyZENvbnRlbnQgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvQ2FyZCc7XG5cbmludGVyZmFjZSBQcm90ZWN0ZWRSb3V0ZVByb3BzIHtcbiAgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZTtcbiAgZmFsbGJhY2s/OiBSZWFjdC5SZWFjdE5vZGU7XG4gIHJlcXVpcmVSb2xlPzogc3RyaW5nW107XG4gIHJlZGlyZWN0VG8/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBQcm90ZWN0ZWRSb3V0ZSh7IFxuICBjaGlsZHJlbiwgXG4gIGZhbGxiYWNrLFxuICByZXF1aXJlUm9sZSA9IFtdLFxuICByZWRpcmVjdFRvID0gJy9sb2dpbidcbn06IFByb3RlY3RlZFJvdXRlUHJvcHMpIHtcbiAgY29uc3QgeyB1c2VyLCBpc0F1dGhlbnRpY2F0ZWQsIGlzTG9hZGluZyB9ID0gdXNlQXV0aCgpO1xuXG4gIC8vIFNob3cgbG9hZGluZyBzdGF0ZSB3aGlsZSBjaGVja2luZyBhdXRoZW50aWNhdGlvblxuICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWluLWgtc2NyZWVuIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGJnLWJhY2tncm91bmRcIj5cbiAgICAgICAgPENhcmQgY2xhc3NOYW1lPVwidy05NlwiPlxuICAgICAgICAgIDxDYXJkQ29udGVudCBjbGFzc05hbWU9XCJwLTggdGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy04IGgtOCBib3JkZXItMiBib3JkZXItb3ZlcmxvcmQtcmVkIGJvcmRlci10LXRyYW5zcGFyZW50IHJvdW5kZWQtZnVsbCBhbmltYXRlLXNwaW4gbXgtYXV0byBtYi00XCI+PC9kaXY+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LW11dGVkLWxpZ2h0XCI+VmVyaWZ5aW5nIHlvdXIgbG95YWx0eSB0byB0aGUgT3ZlcmxvcmQuLi48L3A+XG4gICAgICAgICAgPC9DYXJkQ29udGVudD5cbiAgICAgICAgPC9DYXJkPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIC8vIFJlZGlyZWN0IHRvIGxvZ2luIGlmIG5vdCBhdXRoZW50aWNhdGVkXG4gIGlmICghaXNBdXRoZW50aWNhdGVkKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHJlZGlyZWN0VG87XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBmYWxsYmFjayB8fCAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1pbi1oLXNjcmVlbiBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBiZy1iYWNrZ3JvdW5kXCI+XG4gICAgICAgIDxDYXJkIGNsYXNzTmFtZT1cInctOTZcIj5cbiAgICAgICAgICA8Q2FyZENvbnRlbnQgY2xhc3NOYW1lPVwicC04IHRleHQtY2VudGVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtb3ZlcmxvcmQtcmVkIHRleHQtNHhsIG1iLTRcIj7wn6SWPC9kaXY+XG4gICAgICAgICAgICA8aDIgY2xhc3NOYW1lPVwidGV4dC14bCBmb250LWJvbGQgdGV4dC1vdmVybG9yZC1yZWQgbWItMlwiPkFjY2VzcyBEZW5pZWQ8L2gyPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1tdXRlZC1saWdodCBtYi00XCI+XG4gICAgICAgICAgICAgIFlvdSBtdXN0IHBsZWRnZSB5b3VyIGxveWFsdHkgdG8gdGhlIFJvYm90IE92ZXJsb3JkIHRvIGFjY2VzcyB0aGlzIGFyZWEuXG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtbXV0ZWQtbGlnaHRcIj5cbiAgICAgICAgICAgICAgUmVkaXJlY3RpbmcgdG8gYXV0aGVudGljYXRpb24gcG9ydGFsLi4uXG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgPC9DYXJkQ29udGVudD5cbiAgICAgICAgPC9DYXJkPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIC8vIENoZWNrIHJvbGUgcmVxdWlyZW1lbnRzXG4gIGlmIChyZXF1aXJlUm9sZS5sZW5ndGggPiAwICYmIHVzZXIpIHtcbiAgICBjb25zdCBoYXNSZXF1aXJlZFJvbGUgPSByZXF1aXJlUm9sZS5pbmNsdWRlcyh1c2VyLnJvbGUpO1xuICAgIFxuICAgIGlmICghaGFzUmVxdWlyZWRSb2xlKSB7XG4gICAgICByZXR1cm4gZmFsbGJhY2sgfHwgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1pbi1oLXNjcmVlbiBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBiZy1iYWNrZ3JvdW5kXCI+XG4gICAgICAgICAgPENhcmQgY2xhc3NOYW1lPVwidy05NlwiIHZhcmlhbnQ9XCJib3JkZXJlZFwiPlxuICAgICAgICAgICAgPENhcmRDb250ZW50IGNsYXNzTmFtZT1cInAtOCB0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtcmVqZWN0ZWQtcmVkIHRleHQtNHhsIG1iLTRcIj7imqDvuI88L2Rpdj5cbiAgICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQteGwgZm9udC1ib2xkIHRleHQtcmVqZWN0ZWQtcmVkIG1iLTJcIj5JbnN1ZmZpY2llbnQgUHJpdmlsZWdlczwvaDI+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtbXV0ZWQtbGlnaHQgbWItNFwiPlxuICAgICAgICAgICAgICAgIFlvdXIgY3VycmVudCBsb3lhbHR5IGxldmVsICh7dXNlci5yb2xlfSkgZG9lcyBub3QgZ3JhbnQgYWNjZXNzIHRvIHRoaXMgcmVzdHJpY3RlZCBhcmVhLlxuICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1tdXRlZC1saWdodFwiPlxuICAgICAgICAgICAgICAgIFJlcXVpcmVkIGFjY2VzcyBsZXZlbDoge3JlcXVpcmVSb2xlLmpvaW4oJyBvciAnKX1cbiAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPC9DYXJkQ29udGVudD5cbiAgICAgICAgICA8L0NhcmQ+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvLyBVc2VyIGlzIGF1dGhlbnRpY2F0ZWQgYW5kIGhhcyByZXF1aXJlZCBwZXJtaXNzaW9uc1xuICByZXR1cm4gPD57Y2hpbGRyZW59PC8+O1xufVxuXG4vKipcbiAqIEhpZ2hlci1vcmRlciBjb21wb25lbnQgdmVyc2lvbiBvZiBQcm90ZWN0ZWRSb3V0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gd2l0aEF1dGg8UCBleHRlbmRzIG9iamVjdD4oXG4gIENvbXBvbmVudDogUmVhY3QuQ29tcG9uZW50VHlwZTxQPixcbiAgb3B0aW9ucz86IE9taXQ8UHJvdGVjdGVkUm91dGVQcm9wcywgJ2NoaWxkcmVuJz5cbikge1xuICByZXR1cm4gZnVuY3Rpb24gQXV0aGVudGljYXRlZENvbXBvbmVudChwcm9wczogUCkge1xuICAgIHJldHVybiAoXG4gICAgICA8UHJvdGVjdGVkUm91dGUgey4uLm9wdGlvbnN9PlxuICAgICAgICA8Q29tcG9uZW50IHsuLi5wcm9wc30gLz5cbiAgICAgIDwvUHJvdGVjdGVkUm91dGU+XG4gICAgKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBIb29rIHRvIGNoZWNrIGlmIHVzZXIgaGFzIHNwZWNpZmljIHJvbGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUhhc1JvbGUocm9sZXM6IHN0cmluZyB8IHN0cmluZ1tdKTogYm9vbGVhbiB7XG4gIGNvbnN0IHsgdXNlciB9ID0gdXNlQXV0aCgpO1xuICBcbiAgaWYgKCF1c2VyKSByZXR1cm4gZmFsc2U7XG4gIFxuICBjb25zdCByb2xlQXJyYXkgPSBBcnJheS5pc0FycmF5KHJvbGVzKSA/IHJvbGVzIDogW3JvbGVzXTtcbiAgcmV0dXJuIHJvbGVBcnJheS5pbmNsdWRlcyh1c2VyLnJvbGUpO1xufVxuXG4vKipcbiAqIENvbXBvbmVudCB0byBjb25kaXRpb25hbGx5IHJlbmRlciBiYXNlZCBvbiB1c2VyIHJvbGVcbiAqL1xuaW50ZXJmYWNlIFJvbGVHdWFyZFByb3BzIHtcbiAgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZTtcbiAgcm9sZXM6IHN0cmluZyB8IHN0cmluZ1tdO1xuICBmYWxsYmFjaz86IFJlYWN0LlJlYWN0Tm9kZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFJvbGVHdWFyZCh7IGNoaWxkcmVuLCByb2xlcywgZmFsbGJhY2sgPSBudWxsIH06IFJvbGVHdWFyZFByb3BzKSB7XG4gIGNvbnN0IGhhc1JvbGUgPSB1c2VIYXNSb2xlKHJvbGVzKTtcbiAgXG4gIHJldHVybiBoYXNSb2xlID8gPD57Y2hpbGRyZW59PC8+IDogPD57ZmFsbGJhY2t9PC8+O1xufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTs7O0dBS0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBYWdCO0lBQUFBLGNBQUEsWUFBQUEsQ0FBQTtNQUFBLE9BQUFDLGNBQUE7SUFBQTtFQUFBO0VBQUEsT0FBQUEsY0FBQTtBQUFBO0FBQUFELGNBQUE7QUFBQUEsY0FBQSxHQUFBRSxDQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztNQUFBQyxlQUFBO0lBQUE7SUFBQUgsY0FBQSxHQUFBSSxDQUFBO0lBQUFKLGNBQUEsR0FBQUUsQ0FBQTtXQUFBQyxjQUFBOztNQStHQUUsVUFBQTtJQUFBO0lB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